---
layout: post
title: compCode.js
version: 181以降
date: 2021-11-01
comment: スクリプトを書き直した。
categories: Script
---
### 説明
一行編集で編集した文字列を自動でエスケープ補完するためのスクリプト。<BR>
主に`"` `%` `\`を自動補完する用途で使います。引数で与えられた文字列内の指定した文字を
指定した回数ぶんエスケープした文字列を返します。

### 使い方
- スクリプト内変数`COUNT_MAX`(補完対象文字の最大重複回数)を設定する。初期値=4
- 第一引数は補完対象の選択。`i`%\*input,  `e`%\*edittext,  `s`"%\*selecttext から選ぶ。
  - 二文字目以降はeditmodeを指定。`compCode.js,"iOh"`なら、`%*input(-mode:Oh)`となる。
- 第二引数は補完対象文字。`""` `%%` `\\` から選ぶ。また、数字とアルファベットを指定出来る。
 詳細はスクリプト内のコメントを確認。
- 第三引数はinputのタイトル。指定しない場合はcompCode..が代入される。
- 第四引数はinputの-kオプションを指定できる。指定しない場合は何も実行されない。
- いずれの引数も""で挟むこと。`,"i","""%%\\","インプットタイトル","*string e,opt=comp"`のような感じ。

> 使用例) \*addhistory h,"%\*script(%'scr'%\compcode.js,"e","""")"<BR>
上記は一行編集から呼び出して使います。`"%*script()"`のように""で挟む必要があります。<BR>
通常なら、編集内容中の`""%FDC""`とエスケープが必要な箇所が`"%FDC"`で問題なく保存されます。<BR>
まぁこんなことしなくてもヒストリは自動で保存されるのですが。<BR>
<BR>
<script src="https://gist.github.com/tar80/0fef379791cf5d6eead9e73df79a15b7.js"></script>

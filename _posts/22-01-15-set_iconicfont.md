---
layout: post
title: アイコンフォントをエントリに設定
version: PPx184以降
date: 2022-06-20
comment: 記事を修正
repository: tar80/ppm-iconicfont
categories: PPc @plugin
---

### 説明

NerdFontsに含まれるアイコンフォントを拡張子アイコンの代わりに表示します。  
~~拡張コメントにアイコンフォントをセットして表示する仕組みです。重めの処理なのでPCのスペックによって
は常用は厳しいかもしれません。前提として使用フォントがNerdFontsをサポートしていること、描画・速度面から
PPxDirectWrite版+ES6での運用のみを想定しています。~~

PPx本体で拡張子アイコンの絵文字利用が可能になったので、そちらの機能を利用するようにしました。  
PPcの表示フォントとは別個に絵文字フォントを指定したり、アイコンごとの色付けができるようです。  

> - ~~`*`で対応する拡張子がないときのアイコン指定。これは未指定拡張子のアイコン指定と捉えましたが、
    私の環境では適用されませんでした。~~`*`ではなく正規表現`/.*/`が正しい指定方法でした。
> - c'色指定'は、uアイコン指定より前に書かないと反映されないようです。
> - 適用される拡張子の長さは、X\_extl(拡張子とみなす最大長さ)に依存するようです。
> - おかしな設定になっているとアイコンの登録に失敗しIcon BrokenエラーがでてPPcが落ちることがある。

<BR>
![sample]({{ site.baseurl }}{% link /public/img/set_iconicfont.png %})

> 画像のフォントはFirgeNerd 12pt

### 使い方

- 最初にNerdFontsを用意する。標準ではFirgeNerdを使っていますが別のフォントでも構いません。  
- `*ppmList _iconlist`を実行して割り当てるアイコンを書き込む。  
- `*ppmEdit ppm-iconicfont`を実行。プラグインの読込み時にACTIVEEVENTでスクリプトが実行され
アイコンフォントが割り当てられる。この時、拡張子に色設定が割り振られていればアイコンも
同色に設定される。

設定後は再起動してください。そのまま使っているとIcon Brokenエラーがでる場合があります。  
対処はするつもりですが時間がかかりそうです。
